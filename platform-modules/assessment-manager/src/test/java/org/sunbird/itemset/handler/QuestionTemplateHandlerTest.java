package org.sunbird.itemset.handler;

import com.fasterxml.jackson.databind.ObjectMapper;
import org.sunbird.assessment.util.QuestionTemplateHandler;
import org.sunbird.graph.dac.model.Node;
import org.junit.Assert;
import org.junit.Test;

import java.io.IOException;
import java.util.Map;

public class QuestionTemplateHandlerTest {

    ObjectMapper mapper = new ObjectMapper();

    @Test
    public void testHandleHtmlTemplate() throws Exception {
        String contextString = "{\"questions\":\"<div class='question-section'><div class='question-count'>1.</div><div class='mcq-vertical cheveron-helper'><div class='mcq-title'><p>The Rowlatt Act was passed in : </p></div><i class='chevron down icon'></i><div class='mcq-options'><div data-simple-choice-interaction data-response-variable='responseValue' value=0 class='mcq-option'><p>1905</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=1 class='mcq-option'><p>1915</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=2 class='mcq-option'><p>1925</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=3 class='mcq-option'><p>1935</p></div></div></div></div><div class='question-section'><div class='question-count'>2.</div><div class='mcq-vertical cheveron-helper'><div class='mcq-title'><p>Who is father of Nation?</p></div><i class='chevron down icon'></i><div class='mcq-options'><div data-simple-choice-interaction data-response-variable='responseValue' value=0 class='mcq-option'><p>Jawahar Lal Nehru</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=1 class='mcq-option'><p>Sardar Vallabh Bhai Patel</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=2 class='mcq-option'><p>Mahatma Gandhi</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=3 class='mcq-option'><p>Bhagat Singh</p></div></div></div></div><div class='question-section'><div class='question-count'>3.</div><div class='mcq-vertical cheveron-helper'><div class='mcq-title'><p>The revolutionary like Ashfaqullah Khan, Chandra Shekhar  Azad, Ram Prasad Bismil, Roshan Singh and Rajendra Lahiri were all associated with : </p></div><i class='chevron down icon'></i><div class='mcq-options'><div data-simple-choice-interaction data-response-variable='responseValue' value=0 class='mcq-option'><p>The Kakori Conspircy case (1925)</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=1 class='mcq-option'><p>1857 Revolt</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=2 class='mcq-option'><p>Chauri Chaura Case</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=3 class='mcq-option'><p>The Jallianwala Bagh massacre</p></div></div></div></div><div class='question-section'><div class='question-count'>4.</div><div class='mcq-vertical cheveron-helper'><div class='mcq-title'><p>Who is the founder of Haryanka Dynasty?</p></div><i class='chevron down icon'></i><div class='mcq-options'><div data-simple-choice-interaction data-response-variable='responseValue' value=0 class='mcq-option'><p>Ajatshatru</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=1 class='mcq-option'><p>Harshvardhan</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=2 class='mcq-option'><p>Bimbisar</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=3 class='mcq-option'><p>Ghananand</p></div></div></div></div><div class='question-section'><div class='question-count'>5.</div><div class='mcq-vertical cheveron-helper'><div class='mcq-title'><p>The Moplah Rebellion in 1921 in Malabar was Muslim Peasants Rabellion against :</p></div><i class='chevron down icon'></i><div class='mcq-options'><div data-simple-choice-interaction data-response-variable='responseValue' value=0 class='mcq-option'><p>Muslim Land Holders</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=1 class='mcq-option'><p>The British Government Authority</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=2 class='mcq-option'><p>The non-tribal outsiders</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=3 class='mcq-option'><p>The non-tribal outsiders</p></div></div></div></div><div class='question-section'><div class='question-count'>6.</div><div class='mcq-vertical cheveron-helper'><div class='mcq-title'><p>What is the capital of India?</p></div><i class='chevron down icon'></i><div class='mcq-options'><div data-simple-choice-interaction data-response-variable='responseValue' value=0 class='mcq-option'><p>Bangalore</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=1 class='mcq-option'><p>Hydrabad</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=2 class='mcq-option'><p>New Delhi</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=3 class='mcq-option'><p>Chennai</p></div></div></div></div><div class='question-section'><div class='question-count'>7.</div><div class='mcq-vertical cheveron-helper'><div class='mcq-title'><p>Which of the following sets of tests would be LEAST urgently indicated for a patient presenting with intraocular pressures of R 22mmHg and L 46mmHg?</p></div><i class='chevron down icon'></i><div class='mcq-options'><div data-simple-choice-interaction data-response-variable='responseValue' value=0 class='mcq-option'><p>Visual field examination and dilated optic nerve head assessment</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=1 class='mcq-option'><p>Examination of the irides and anterior chamber assessment for cells and flare</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=2 class='mcq-option'><p>Gonioscopy and assessment of the lens capsule</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=3 class='mcq-option'><p>Assessment of the corneal endothelium and iris transillumination</p></div></div></div></div><div class='question-section'><div class='question-count'>8.</div><div class='mcq-vertical cheveron-helper'><div class='mcq-title'><p>What is the capital of USA?</p></div><i class='chevron down icon'></i><div class='mcq-options'><div data-simple-choice-interaction data-response-variable='responseValue' value=0 class='mcq-option'><p>Washington DC</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=1 class='mcq-option'><p>Brasilia</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=2 class='mcq-option'><p>Maxico City</p></div><div data-simple-choice-interaction data-response-variable='responseValue' value=3 class='mcq-option'><p>New Delhi</p></div></div></div></div>\",\"answers\":\"<div class='question-section'><div class='question-count'>1.</div><div class='answer'>1</div></div><div class='question-section'><div class='question-count'>2.</div><div class='answer'>2</div></div><div class='question-section'><div class='question-count'>3.</div><div class='answer'>2</div></div><div class='question-section'><div class='question-count'>4.</div><div class='answer'>3</div></div><div class='question-section'><div class='question-count'>5.</div><div class='answer'>2</div></div><div class='question-section'><div class='question-count'>6.</div><div class='answer'>2</div></div><div class='question-section'><div class='question-count'>7.</div><div class='answer'>1</div></div><div class='question-section'><div class='question-count'>8.</div><div class='answer'>0</div></div>\",\"title\":\"Question Set - 1\"}";
        Map<String, Object> context = mapper.readValue(contextString, Map.class);
        String templateString = QuestionTemplateHandler.handleHtmlTemplate("questionSetTemplate.vm", context);
        Assert.assertNotNull(templateString);
    }
}
