<theme id="theme" startStage="splash">
    <manifest>
        <media id="bg" src="bg.png" type="image" />
        <media id="noah" src="noah.png" type="image" />
        <media id="entermission" src="entermission.png" type="image" />
        <media id="entermission" src="entermission.png" type="image" />
        <media id="blacktint_full" src="blacktint_full.png" type="image" />
        <media id="blacktint_square" src="blacktint_736x648.png" type="image" />
        <media id="blacktint_rect" src="blacktint_736x325.png" type="image" />
        <media id="home_icon" src="home_icon.png" type="image" />
        <media id="startnow" src="startnow.png" type="image" />
        <media id="speechbubble" src="speechbubble.png" type="image" />
        <media id="separator_vertical" src="separator_vertical.png" type="image" />
        <media id="separator_horizontal" src="separator_horizontal.png" type="image" />
        <media id="plus" src="operators/operator_plus.png" type="image" />
        <media id="minus" src="operators/operator_minus.png" type="image" />
        <media id="equals" src="operators/operator_equals.png" type="image" />
        <media id="hint" src="icons/icon_hint.png" type="image" />
        <media id="validate" src="icons/icon_validate.png" type="image" />
        <media id="difficulty_high" src="icons/icon_difficulty_high.png" type="image" />
        <media id="next" src="icons/icon_next.png" type="image" />
        <media id="previous" src="icons/icon_previous.png" type="image" />
        <media id="profile" src="icons/icon_profile.png" type="image" />

        <media id="correct_answer" src="spaceship_gotitcorrect.png" type="image" />
        <media id="wrong_answer" src="spaceship_wronganswer.png" type="image" />
        <media id="button_next" src="button_next.png" type="image" />
        <media id="button_tryagain" src="button_tryagain.png" type="image" />

        <media id="butterfly_ltgray" src="characters/character_butterfly_ltgray.png" type="image" />
        <media id="butterfly_midgray" src="characters/character_butterfly_midgray.png" type="image" />
        <media id="butterfly_white" src="characters/character_butterfly_white.png" type="image" />
        <media id="cat_ltgray" src="characters/character_cat_ltgray.png" type="image" />
        <media id="cat_midgray" src="characters/character_cat_midgray.png" type="image" />
        <media id="cat_white" src="characters/character_cat_white.png" type="image" />
        <media id="deer_ltgray" src="characters/character_deer_ltgray.png" type="image" />
        <media id="deer_midgray" src="characters/character_deer_midgray.png" type="image" />
        <media id="deer_white" src="characters/character_deer_white.png" type="image" />
        <media id="elephant_ltgray" src="characters/character_elephant_ltgray.png" type="image" />
        <media id="elephant_midgray" src="characters/character_elephant_midgray.png" type="image" />
        <media id="elephant_white" src="characters/character_elephant_white.png" type="image" />

        <media id="thunder_sound" src="thunder.mp3" type="sound" />
        <media id="sound_image" src="sound.png" type="image" />
    </manifest>
    <controller name="ws1" type="items" id="addition"/>
    <controller name="ws_data" type="data" id="data"/>
    <template id="vertical_add">
        <text x="6" y="5" w="40" h="10" font="Arial" fontsize="48" color="#fff" model="data.item_title"/>
        <placeholder model="item.param1" x="5" y="15" w="25" h="25"/>
        <input type="number" class="inputText" x="14" y="57" w="7" h="7" id="text1" model="item.ans1"/>
        <image asset="separator_vertical" x="32" y="10" w="0.5" h="50"/>
        <placeholder model="item.param2" x="37" y="15" w="25" h="25"/>
        <input type="number" class="inputText" x="43" y="57" w="7" h="7" id="text2" model="item.ans2"/>
        <image asset="separator_horizontal" x="2" y="65" w="58" h="1"/>
        <placeholder model="item.param3" x="2" y="66" w="80" h="15"/>
        <input type="number" class="inputText" x="28" y="90" w="7" h="7" id="text3" model="item.ans3"/>
        <image asset="plus" x="30.7" y="33" w="3" h="3"/>
        <image asset="equals" x="30.7" y="64" w="3" h="3"/>
    </template>
    <stage id="baseStage">
        <image asset="butterfly_ltgray"/>
        <image asset="butterfly_midgray"/>
        <image asset="butterfly_white"/>
        <image asset="cat_ltgray"/>
        <image asset="cat_midgray"/>
        <image asset="cat_white"/>
        <image asset="deer_ltgray"/>
        <image asset="deer_midgray"/>
        <image asset="deer_white"/>
        <image asset="elephant_ltgray"/>
        <image asset="elephant_midgray"/>
        <image asset="elephant_white"/>
    </stage>
    <stage id="splash" x="0" y="0" w="100" h="100">
        <param name="next" value="welcome"/>
        <image asset="bg" x="0" y="0" w="100" h="100"/>
        <image asset="blacktint_square" x="4" y="34" w="38" h="50"/>
        <!-- fontsize is the expected font size of text in 1920 x 1200 resolution -->
        <text x="10" y="15" w="22" h="23" font="Arial" weight="bold" fontsize="96" color="#fff">
            Noah's Ark...
        </text>
        <text id="noah" x="7" y="40" w="32" h="49" font="Arial, serif" fontsize="48" color="#fff">
            Noah, an alien from Mars is on a mission to take some living beings from Earth to Mars. He has come with a space ship to Earth. He wants collect the following beings. Help him to add and get the required number of items.
        </text>
        <image asset="noah" x="48" y="10" w="20" h="65"/>
        <image asset="entermission" x="30" y="78" w="22" h="22" id="next">
            <event type="click">
                <action type="command" command="transitionTo" asset="theme" param="next" effect="scroll" direction="top" ease="linear" duration="500"/>
            </event>
        </image>
    </stage>
    <stage id="welcome" x="0" y="0" w="100" h="100">
        <param name="next" value="item"/>
        <audio id="thunder_sound"/>
        <image asset="bg" x="0" y="0" w="100" h="100"/>
        <image asset="blacktint_square" x="4" y="34" w="38" h="30"/>
        <image asset="startnow" x="4" y="65" w="35" h="30" id="next">
            <event type="click">
                <action type="command" command="transitionTo" asset="theme" param="next" effect="scroll" direction="top" ease="linear" duration="500"/>
            </event>
        </image>
        <image asset="noah" x="60" y="10" w="20" h="65"/>
        <image asset="speechbubble" x="35" y="17" w="32" h="19"/>
        <!-- fontsize is the expected font size of text in 1920 x 1200 resolution -->
        <text x="10" y="15" w="22" h="23" font="Arial" weight="bold" fontsize="96" color="#fff" model="ws_data.title"/>
        <text x="7" y="40" w="32" h="40" font="Arial" fontsize="48" color="#fff" model="ws_data.description"/>
        <text x="38" y="22" w="28" h="16" font="Arial, serif" fontsize="32" color="#000" model="ws_data.message"/>
        <shape type="rect" x="67" y="27" w="5" h="10" hitArea="true" rotate="30">
            <event type="click">
                <action type="command" command="togglePlay" asset="thunder_sound" loop="1"/>
            </event>
        </shape>
        <events>
            <event type="exit">
                <action type="command" command="stop" asset="thunder_sound" audio="true"/>
            </event>
        </events>
    </stage>
    <stage id="item" x="0" y="0" w="100" h="100" iterate="ws1" var="item">
        <param name="next" value="summary"/>
        <param name="previous" value="welcome"/>
        <g x="0" y="0" w="100" h="100">
            <image asset="bg" x="0" y="0" w="100" h="100"/>
            <image asset="difficulty_high" x="1" y="1" w="5" h="9"/>
            <image asset="blacktint_rect" x="-2" y="0" w="40" h="10"/>
            <embed template="item" var-item="item" var-data="ws_data"/>
            <image asset="noah" x="62" y="5" w="15" h="50" id="img_noah"/>
            <image asset="previous" x="83" y="1" w="5" h="9" visible="false">
            </image>
            <shape id="previousContainer" type="rect" x="80" y="1" w="8" h="12" visible="false" hitArea="true">
                <event type="click">
                    <action type="command" command="transitionTo" asset="theme" value="welcome" effect="scroll" direction="bottom" ease="linear" duration="500" transitionType="previous"/>
                </event>
            </shape>
            <image asset="profile" x="88" y="1" w="5" h="9"/>
            <image asset="next" x="93" y="1" w="5" h="9" visible="false">
            </image>
            <shape id="nextContainer" type="rect" x="90" y="1" w="10" h="12" visible="false" hitArea="true">
                <event type="click">
                    <action type="command" command="transitionTo" asset="theme" value="summary" effect="scroll" direction="top" ease="linear" duration="500"/>
                </event>
            </shape>
            <image asset="hint" x="93" y="20" w="5" h="9"/>
            <image asset="validate" x="93" y="30" w="5" h="9">
                <event type="click">
                    <action type="command" command="eval" asset="item" success="correct_answer" failure="wrong_answer"/>
                </event>
            </image>
        </g>
        <image asset="blacktint_full" x="0" y="0" w="100" h="100" visible="false" id="img_overlay"/>
        <image asset="correct_answer" x="100" y="0" w="5" h="5" visible="false" id="img_correct_answer">
            <event type="show">
                <action type="animation" id="spaceShip" widthChangeEvent="true">
                    <to ease="linear" duration="10"><![CDATA[{"x":100,"y":0,"visible":true}]]></to>
                    <to ease="quartIn" duration="1000"><![CDATA[{"x":0,"y":10,"w":45,"h":45}]]></to>
                    <to ease="circOut" duration="500"><![CDATA[{"x":15,"y":15,"w":70,"h":70}]]></to>
                </action>
            </event>
        </image>
        <image asset="wrong_answer" x="15" y="15" w="70" h="70" visible="false" id="img_wrong_answer">
            <event type="show">
                <action type="animation" id="spaceShip" widthChangeEvent="true">
                    <to ease="linear" duration="10"><![CDATA[{"x":100,"y":0,"visible":true}]]></to>
                    <to ease="quartIn" duration="1000"><![CDATA[{"x":0,"y":10,"w":45,"h":45}]]></to>
                    <to ease="circOut" duration="500"><![CDATA[{"x":15,"y":15,"w":70,"h":70}]]></to>
                </action>
            </event>
        </image>
        <image asset="button_next" x="43" y="45" w="15" h="5" visible="false" id="btn_next">
            <event type="show">
                <action type="animation" id="delayedShow">
                    <to duration="1500" ease="linear"><![CDATA[{"x":43,"y":45,"visible":true}]]></to>
                </action>
            </event>
            <event type="click">
                <action type="command" command="transitionTo" asset="theme" value="summary" effect="scroll" direction="top" ease="linear" duration="500"/>
            </event>
        </image>
        <image asset="button_tryagain" x="43" y="45" w="15" h="5" visible="false" id="btn_try_again">
            <event type="show">
                <action type="animation" id="delayedShow">
                    <to duration="1500" ease="linear"><![CDATA[{"x":43,"y":45,"visible":true}]]></to>
                </action>
            </event>
            <event type="click">
                <action type="command" command="reload" asset="item" effect="scroll" direction="top" ease="linear" duration="500"/>
            </event>
        </image>
        <appEvents list="correct_answer,wrong_answer"/>
        <events>
            <event type="correct_answer">
                <action type="command" command="show" asset="img_overlay"/>
                <action type="command" command="show" asset="img_correct_answer"/>
                <action type="command" command="show" asset="btn_next"/>
                <action type="command" command="hide" asset="img_wrong_answer"/>
                <action type="command" command="hide" asset="btn_try_again"/>
                <action type="command" command="hide" asset="text1"/>
                <action type="command" command="hide" asset="text2"/>
                <action type="command" command="hide" asset="text3"/>
            </event>
            <event type="wrong_answer">
                <action type="command" command="show" asset="img_overlay"/>
                <action type="command" command="show" asset="img_wrong_answer"/>
                <action type="command" command="show" asset="btn_try_again"/>
                <action type="command" command="hide" asset="img_correct_answer"/>
                <action type="command" command="hide" asset="btn_next"/>
                <action type="command" command="hide" asset="text1"/>
                <action type="command" command="hide" asset="text2"/>
                <action type="command" command="hide" asset="text3"/>
            </event>
        </events>
    </stage>
    <stage id="summary" x="0" y="0" w="100" h="100">
        <image asset="bg" x="0" y="0" w="100" h="100"/>
        <image asset="home_icon" x="93" y="1" w="5" h="9">
            <event type="click">
                <action type="command" command="windowEvent" asset="theme" href="index.html"/>
            </event>
        </image>
        <image asset="difficulty_high" x="1" y="1" w="5" h="9"/>
        <image asset="blacktint_rect" x="-2" y="0" w="40" h="10"/>
        <image asset="speechbubble" x="5" y="30" w="50" h="30"/>
        <image asset="noah" x="48" y="35" w="20" h="65"/>
        <text x="6" y="5" w="40" h="10" font="Arial" fontsize="48" color="#fff">
            ADDITION - By Grouping
        </text>
        <summary x="13" y="35" w="25" h="40" font="Arial" fontsize="40" color="#333" controller="ws1"/>
    </stage>
</theme>